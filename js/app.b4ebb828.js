(function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],f=0,d=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([1,"chunk-vendors"]),n()})({0:function(e,t){},1:function(e,t,n){e.exports=n("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("random-draw")],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"random-draw"},[n("div",{staticClass:"random-container"},[n("div",{staticStyle:{position:"absolute",bottom:"40px",right:"10px",color:"#fff9b0","font-size":"40px"}},[e._v("DesignBy: AloneTu")]),n("el-input-number",{staticStyle:{width:"calc(100% - 100px)"},attrs:{size:"small"},model:{value:e.drawNumber,callback:function(t){e.drawNumber=t},expression:"drawNumber"}}),e.drawing?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.startDraw}},[e._v("开始抽奖")]):n("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.closeDraw}},[e._v("结束抽奖")]),n("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"8px"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.allNumber,expression:"allNumber !== 0"}]},[e._v("参与抽奖人数："+e._s(e.allNumber)+"人")]),n("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.fetchData.length,expression:"fetchData.length !== 0"}]},[e._v("剩余未中奖人数："+e._s(e.fetchData.length)+"人")])]),n("div",{staticClass:"show-draw"},[e.showDrawInfo?n("div",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"40px"}},[n("span",[e._v("中奖人姓名")]),n("span",[e._v("中奖人手机号")])]):e._e(),e._l(e.drawList,(function(t){return n("div",{key:t.phone,staticClass:"show-draw-item"},[n("span",{staticStyle:{fontSize:"32px","margin-left":"40px"}},[e._v(e._s(t.name))]),n("span",{staticStyle:{fontSize:"32px","margin-right":"40px"}},[e._v(e._s(e.plusXing(t.phone.toString())))])])}))],2),n("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.handleChange,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"file-list":e.fileListUpload,limit:e.limitUpload,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel","auto-upload":!1}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("点击上传")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只 能 上 传 xlsx / xls 文 件")])],1)],1)])},o=[],l=n("2909"),c=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d3b7"),n("d81d"),n("fb6a"),n("99af"),n("159b"),n("c740"),n("a434"),{data:function(){return{fileTemp:null,limitUpload:1,fetchData:[],drawNumber:1,drawList:[],fileListUpload:[],allNumber:0,drawing:!0,showDrawInfo:!1}},methods:{handleChange:function(e){this.fileTemp=e.raw,this.fileTemp?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==this.fileTemp.type||"application/vnd.ms-excel"==this.fileTemp.type?this.importfxx(this.fileTemp):this.$message({type:"warning",message:"附件格式错误，请删除后重新上传！"}):this.$message({type:"warning",message:"请上传附件！"})},handleRemove:function(e){this.fileTemp=null},handleExceed:function(){},importfxx:function(e){var t=this;this.file=e;var a=!1,r=this.file,i=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var a,r,i="",s=!1,o=new FileReader;o.onload=function(e){for(var c=new Uint8Array(o.result),u=c.byteLength,f=0;f<u;f++)i+=String.fromCharCode(c[f]);var d=n("1146");a=s?d.read(btoa(fixdata(i)),{type:"base64"}):d.read(i,{type:"binary"}),r=d.utils.sheet_to_json(a.Sheets[a.SheetNames[0]]),this.da=Object(l["a"])(r);var p=[];return this.da.map((function(e){var t={};t.code=e["设备ID"],t.type=e["设备型号"],p.push(t)})),t.fetchData=JSON.parse(JSON.stringify(r)),t.allNumber=r.length,p},o.readAsArrayBuffer(e)},a?i.readAsArrayBuffer(r):i.readAsBinaryString(r)},getRandomArrayElements:function(e,t){var n,a,r=e.slice(0),i=e.length,s=i-t;while(i-- >s)a=Math.floor((i+1)*Math.random()),n=r[a],r[a]=r[i],r[i]=n;return r.slice(s)},startDraw:function(){var e=this;this.fetchData.length?this.drawNumber>this.fetchData.length?this.$message.warning({message:"抽奖人数(".concat(this.drawNumber,"人)大于剩余未中奖人数(").concat(this.fetchData.length,"人)，请重新输入！")}):(this.showDrawInfo=!0,this.timeInterval=setInterval((function(){e.drawing=!1,e.drawList=e.getRandomArrayElements(e.fetchData,e.drawNumber)}),10)):this.$message.warning({message:"请先上传参与抽奖人员信息！"})},closeDraw:function(){var e=this;clearInterval(this.timeInterval),this.drawList.forEach((function(t){var n=e.fetchData.findIndex((function(e){return e.phone===t.phone}));e.fetchData.splice(n,1)})),this.drawing=!0},plusXing:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*",r=e.length-t-n,i="",s=0;s<r;s++)i+=a;return e.substring(0,t)+i+e.substring(e.length-n)}},beforeDestroy:function(){clearInterval(this.timeInterval)}}),u=c,f=(n("60b4"),n("2877")),d=Object(f["a"])(u,s,o,!1,null,null,null),p=d.exports,h={name:"App",components:{RandomDraw:p}},m=h,v=(n("5c0b"),Object(f["a"])(m,r,i,!1,null,null,null)),b=v.exports,g=n("5c96"),w=n.n(g);n("0fae");a["default"].use(w.a),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(b)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"60b4":function(e,t,n){"use strict";n("b79d")},"9c0c":function(e,t,n){},b79d:function(e,t,n){}});